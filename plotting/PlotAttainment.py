from pymoo.util.nds.non_dominated_sorting import NonDominatedSorting
import numpy as np
import matplotlib.pyplot as plt


def plot_attainment(F, plt, color="grey"):

    F = F[F[:,1].argsort()]

    #plt.plot(F[:,0], F[:,1], '.', color="red", linewidth=1)

    # Get the non-dominated front
    goodFront = F[NonDominatedSorting().do(F)[0]]

    goodFront = goodFront[goodFront[:,1].argsort()]

    badFront = F[NonDominatedSorting().do(-F)[0]]

    badFront = badFront[badFront[:,1].argsort()]

    _plot_single_front(goodFront, plt, color)
    
    _plot_single_front(badFront, plt, color)

    maxx = max(F[:,0])
    maxy = max(F[:,1])
    minx = min(F[:,0])
    miny = min(F[:,1])

    return (maxx, maxy, minx, miny)

def _plot_single_front(F, plt, color="grey"):

    connectionstyle = "angle,angleA=-90,angleB=180,rad=0"

    for (i, row) in enumerate(F[0:-1]):

        next_row = F[i+1]
        
        plt.annotate("",
                    xy=(row[0], row[1]), xycoords='data',
                    xytext=(next_row[0], next_row[1]), textcoords='data',
                    arrowprops=dict(arrowstyle="-", color=color,
                                    patchA=None, patchB=None,
                                    shrinkA=0, shrinkB=0,
                                    connectionstyle=connectionstyle,
                                    ),
                    )

if __name__ == "main":

    F = np.array([[0.99977969, 0.0033269 ],
        [1.        , 0.00378797],
        [0.99493459, 0.01521409],
        [0.99267606, 0.02165697],
        [0.98827786, 0.02750574],
        [0.98687211, 0.02987374],
        [0.98560881, 0.03238292],
        [0.98243147, 0.04356851],
        [0.97910566, 0.04494622],
        [0.97764127, 0.05336463],
        [0.97369575, 0.05571144],
        [0.97091075, 0.0610118 ],
        [0.97154511, 0.06474582],
        [0.96320936, 0.07473763],
        [0.96412224, 0.07607003],
        [0.96043023, 0.0809828 ],
        [0.95613387, 0.09018296],
        [0.95368593, 0.09398094],
        [0.95226948, 0.0966757 ],
        [0.94800802, 0.10531421],
        [0.94858944, 0.10839755],
        [0.94365734, 0.11392123],
        [0.94003065, 0.11985896],
        [0.93904181, 0.12153752],
        [0.93419667, 0.1306043 ],
        [0.93301094, 0.13453077],
        [0.9274678 , 0.14321102],
        [0.92437762, 0.14954855],
        [0.92236199, 0.15335799],
        [0.92179023, 0.15356271],
        [0.91614936, 0.16618467],
        [0.91568534, 0.16833168],
        [0.90973391, 0.17853101],
        [0.90929204, 0.17933209],
        [0.90280443, 0.18827502],
        [0.90265243, 0.19148343],
        [0.9006292 , 0.19522958],
        [0.89754626, 0.1976062 ],
        [0.89089164, 0.21065283],
        [0.89129193, 0.21068051],
        [0.88493443, 0.22204025],
        [0.88343527, 0.22469112],
        [0.87920014, 0.23363496],
        [0.87612872, 0.23515815],
        [0.87387426, 0.23977973],
        [0.86758018, 0.25071926],
        [0.86636795, 0.25275847],
        [0.86023395, 0.26463936],
        [0.85533583, 0.27145261],
        [0.85258531, 0.27641473],
        [0.85109483, 0.27975329],
        [0.85079242, 0.28372553],
        [0.84403422, 0.29094244],
        [0.84227753, 0.29436476],
        [0.8391324 , 0.29917695],
        [0.83518645, 0.30511399],
        [0.83143422, 0.31360159],
        [0.82792428, 0.31697464],
        [0.82898761, 0.31931297],
        [0.82103222, 0.3303163 ],
        [0.82723082, 0.33835752],
        [0.8166315 , 0.33925335],
        [0.81481149, 0.34035532],
        [0.80825283, 0.35028822],
        [0.80851052, 0.35071028],
        [0.80251899, 0.36061233],
        [0.79988207, 0.36460812],
        [0.79547701, 0.37257858],
        [0.79291025, 0.3784497 ],
        [0.78842254, 0.38070669],
        [0.78747778, 0.38414341],
        [0.78548301, 0.38659459],
        [0.77979629, 0.39535183],
        [0.77452383, 0.40464465],
        [0.77308856, 0.40543387],
        [0.76648496, 0.41559395],
        [0.76871345, 0.41583233],
        [0.76525911, 0.41885273],
        [0.76042588, 0.42515196],
        [0.75807888, 0.43103839],
        [0.75557241, 0.43222949],
        [0.75404259, 0.43529429],
        [0.75049428, 0.44012554],
        [0.74536609, 0.44639587],
        [0.74504345, 0.44794033],
        [0.74210751, 0.4536328 ],
        [0.74091168, 0.45435787],
        [0.73707858, 0.46104124],
        [0.72840709, 0.474279  ],
        [0.72682042, 0.47529849],
        [0.72263362, 0.48373443],
        [0.71705214, 0.49398289],
        [0.71523572, 0.49722322],
        [0.70927077, 0.50014509],
        [0.70349288, 0.50991106],
        [0.70216378, 0.51187025],
        [0.69811608, 0.51610504],
        [0.6904957 , 0.52648402],
        [0.68953645, 0.52806193],
        [0.69035873, 0.52833693],
        [0.68534472, 0.53414075],
        [0.67835887, 0.54399771],
        [0.67863129, 0.54434526],
        [0.67639969, 0.54456602],
        [0.67255062, 0.55090163],
        [0.67084408, 0.55536944],
        [0.66478546, 0.56106517],
        [0.66296997, 0.56583301],
        [0.65619949, 0.57473125],
        [0.64971157, 0.58149193],
        [0.64616945, 0.58774552],
        [0.64149374, 0.59152662],
        [0.64127085, 0.59468896],
        [0.63629317, 0.59965503],
        [0.63310911, 0.60439126],
        [0.62883802, 0.61019182],
        [0.62429738, 0.61357093],
        [0.62010806, 0.62351588],
        [0.62633358, 0.62663394],
        [0.61097802, 0.6330271 ],
        [0.62111499, 0.63311313],
        [0.60661732, 0.63753407],
        [0.6015051 , 0.64266574],
        [0.59999586, 0.64496629],
        [0.59668364, 0.64553095],
        [0.58940306, 0.65760545],
        [0.58968761, 0.65764521],
        [0.58693287, 0.66074453],
        [0.58346833, 0.66956801],
        [0.57709989, 0.67177063],
        [0.57378002, 0.67505747],
        [0.5723143 , 0.67738428],
        [0.56847214, 0.68039343],
        [0.56536082, 0.68597142],
        [0.55676049, 0.69577745],
        [0.55547523, 0.6969353 ],
        [0.55058308, 0.70341363],
        [0.54346346, 0.70639088],
        [0.54495285, 0.70641427],
        [0.53718638, 0.71422727],
        [0.53257781, 0.72005928],
        [0.52703242, 0.72395659],
        [0.52969638, 0.72522837],
        [0.52156411, 0.73290024],
        [0.51595393, 0.73734234],
        [0.50892792, 0.74319356],
        [0.51061981, 0.74415313],
        [0.50242014, 0.75056485],
        [0.49649117, 0.75597879],
        [0.49412001, 0.76106422],
        [0.48795961, 0.76524943],
        [0.48401479, 0.77071049],
        [0.48274653, 0.77152124],
        [0.47559659, 0.77549947],
        [0.474853  , 0.78025328],
        [0.46741966, 0.78481983],
        [0.46817349, 0.78553329],
        [0.46566131, 0.78645607],
        [0.45944452, 0.79109374],
        [0.45356526, 0.79828758],
        [0.45324775, 0.79901797],
        [0.44424753, 0.80473768],
        [0.44440812, 0.80651372],
        [0.43806616, 0.81136265],
        [0.43501804, 0.81531075],
        [0.42729189, 0.81998848],
        [0.42744965, 0.82189346],
        [0.42153585, 0.82764927],
        [0.41028362, 0.83497891],
        [0.40790037, 0.83788619],
        [0.40118688, 0.84222912],
        [0.39623221, 0.84625758],
        [0.39366941, 0.84827626],
        [0.38932407, 0.8514356 ],
        [0.37827544, 0.85852552],
        [0.38049718, 0.85885634],
        [0.3753802 , 0.86131376],
        [0.36854302, 0.86616216],
        [0.3677201 , 0.86899793],
        [0.36234458, 0.87161378],
        [0.35666051, 0.87691924],
        [0.35360037, 0.87796215],
        [0.34915453, 0.88097442],
        [0.34950309, 0.88191288],
        [0.34214689, 0.88587959],
        [0.33998072, 0.88909443],
        [0.33342249, 0.8934923 ],
        [0.327717  , 0.89513475],
        [0.32299106, 0.90001966],
        [0.31899866, 0.90035707],
        [0.31562037, 0.90252748],
        [0.31094678, 0.9075848 ],
        [0.30388749, 0.9106683 ],
        [0.30012269, 0.91387582],
        [0.29291062, 0.91610214],
        [0.28934742, 0.92038631],
        [0.28271947, 0.92306275],
        [0.28077532, 0.9292271 ],
        [0.28644249, 0.93301754],
        [0.28077532, 0.93480928]])


    plot_attainment(F, plt)

    plt.show()
























